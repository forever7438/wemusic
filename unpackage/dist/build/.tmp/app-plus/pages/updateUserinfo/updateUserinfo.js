(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/updateUserinfo/updateUserinfo"],{"095e":function(e,t,n){"use strict";n.r(t);var s=n("3819"),a=n.n(s);for(var o in s)"default"!==o&&function(e){n.d(t,e,function(){return s[e]})}(o);t["default"]=a.a},3819:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n("5c73"),a=function(){return Promise.all([n.e("common/vendor"),n.e("components/w-picker/w-picker")]).then(n.bind(null,"a604"))},o=function(){return n.e("components/neil-modal/neil-modal").then(n.bind(null,"32c1"))},i=function(){return Promise.all([n.e("common/vendor"),n.e("components/uni-icon/uni-icon")]).then(n.bind(null,"2cce"))},r={components:{wPicker:a,neilModal:o,uniIcon:i},data:function(){return{userInfo:{},show:!1,userImage:"",array:[{label:"男",value:0},{label:"女",value:1}],arrays:[{label:"吃饭",value:1},{label:"睡觉",value:2},{label:"斗地主",value:3},{label:"打豆豆",value:4}],date:"",userName:"",sex:[0],interest:[1],address:""}},onShow:function(){"en-US"==e.getStorageSync("langType")?e.setNavigationBarTitle({title:"Revision of personal data"}):e.setNavigationBarTitle({title:"修改个人资料"})},onLoad:function(){this.getInstertList(),this.getUserInfo()},onNavigationBarButtonTap:function(t){this.userImage&&this.userName&&this.sex&&this.date&&this.interest&&this.address||e.showToast({title:"请填写必填选项!",icon:"none"}),this.ajax({url:1==e.getStorageSync("type")?"user/update_info":"teacherclass/update_info",data:{photo:this.userImage,name:this.userName,sex:this.sex,birthday:new Date(this.date).getTime()/1e3,interest:this.interest,address:this.address},success:function(t){"success"===t.data.body?(e.showToast({title:"个人信息修改成功",icon:"none"}),setTimeout(function(){e.reLaunch({url:"/pages/tabbar/tabbar-5/tabbar-5?type=me"})},1500)):e.showToast({title:t.data.msg,icon:"none"})}})},methods:{getInstertList:function(){var e=this;this.ajax({url:"/index/savor",method:"get",success:function(t){t.data.data.map(function(t){e.arrays.push(t.name)})}})},getUserInfo:function(){var t=this;this.ajax({url:1==e.getStorageSync("type")?"user/info":"teacherclass/info",success:function(n){"success"===n.data.body?(t.userInfo=n.data.data,t.sex=t.userInfo.sex,t.interest=t.userInfo.interest,t.userName=t.userInfo.name,t.userImage=t.userInfo.photo||t.userInfo.j_photo,t.date=(0,s.getDate)(1e3*t.userInfo.birthday),t.address=t.userInfo.address):e.showToast({title:n.data.msg})}})},toggleTabSex:function(){this.$refs.pickerSex.show()},onConfirmSex:function(e){this.sex=e.result},toggleTabInterest:function(){this.$refs.pickerInterest.show()},onConfirmInterest:function(e){this.interest=e.result},toggleTabDate:function(){this.$refs.pickerDate.show()},onConfirmDate:function(e){this.date=e.result},toggleTabAdress:function(){this.$refs.pickerAdress.show()},onConfirmAdress:function(e){this.address="".concat(e.checkArr[0],"-").concat(e.checkArr[1],"-").concat(e.checkArr[2])},bindPickerChangeInterest:function(e){this.indexs=e.target.value,this.interest=this.indexs},updateUserImage:function(){var t=this;e.chooseImage({count:1,success:function(n){e.uploadFile({url:s.ApiUrl+"index/photo_add",filePath:n.tempFilePaths[0],name:"file",header:{role:"student",Authorization:e.getStorageSync("token")},success:function(e){var n=JSON.parse(e.data);"success"===n.data&&(t.userImage=n.body.photo)}})}})}}};t.default=r}).call(this,n("6e42")["default"])},"402c":function(e,t,n){},"4f05":function(e,t,n){"use strict";var s=n("402c"),a=n.n(s);a.a},"75e9":function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.show=!1},e.e1=function(t){e.show=!0})},a=[];n.d(t,"a",function(){return s}),n.d(t,"b",function(){return a})},c940:function(e,t,n){"use strict";n.r(t);var s=n("75e9"),a=n("095e");for(var o in a)"default"!==o&&function(e){n.d(t,e,function(){return a[e]})}(o);n("4f05");var i=n("2877"),r=Object(i["a"])(a["default"],s["a"],s["b"],!1,null,null,null);t["default"]=r.exports},f0c7:function(e,t,n){"use strict";(function(e){n("c992"),n("921b");s(n("66fd"));var t=s(n("c940"));function s(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])}},[["f0c7","common/runtime","common/vendor"]]]);