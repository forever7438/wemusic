(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/updateUserinfo/updateUserinfo"],{"456d":function(e,t,n){},4830:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n("f038"),o=function(){return Promise.all([n.e("common/vendor"),n.e("components/w-picker/w-picker")]).then(n.bind(null,"a6c3"))},a=function(){return n.e("components/neil-modal/neil-modal").then(n.bind(null,"8079"))},i=function(){return n.e("components/uni-icon/uni-icon").then(n.bind(null,"9cc2"))},r={components:{wPicker:o,neilModal:a,uniIcon:i},data:function(){return{userInfo:{},show:!1,userImage:"",array:["男","女"],arrays:["吃饭","睡觉","打豆豆"],index:"",indexs:0,date:"",userName:"",sex:"",interest:"",address:""}},onLoad:function(){this.getUserInfo()},onNavigationBarButtonTap:function(t){this.userImage&&this.userName&&this.sex&&this.date&&this.interest&&this.address?this.ajax({url:"user/update_info",data:{photo:this.userImage,name:this.userName,sex:this.sex,birthday:new Date(this.date).getTime()/1e3,interest:this.interest,address:this.address},success:function(t){"success"===t.data.body?e.showToast({title:"个人信息修改成功",icon:"none"}):e.showToast({title:t.data.msg,icon:"none"})}}):e.showToast({title:"请填写必填选项!",icon:"none"})},methods:{getUserInfo:function(){var t=this;this.ajax({url:1==e.getStorageSync("type")?"user/info":"teacherclass/info",success:function(n){if("success"===n.data.body){switch(t.userInfo=n.data.data,t.index=t.userInfo.sex,t.userInfo.sex){case"2":t.index=1;break;default:t.index=0}t.indexs=t.userInfo.interest||0,t.userName=t.userInfo.name,t.userImage=t.userInfo.photo||t.userInfo.j_photo,t.date=(0,s.getDate)(1e3*t.userInfo.birthday),t.address=t.userInfo.address}else e.showToast({title:n.data.msg})}})},toggleTabDate:function(){this.$refs.pickerDate.show()},onConfirmDate:function(e){this.date="".concat(e[0],"-").concat(e[1],"-").concat(e[2])},toggleTabAdress:function(){this.$refs.pickerAdress.show()},onConfirmAdress:function(e){this.address="".concat(e[0],"-").concat(e[1],"-").concat(e[2])},bindPickerChangeSex:function(e){this.index=e.target.value,e.target.value=this.sex=2},bindPickerChangeInterest:function(e){this.indexs=e.target.value,this.interest=this.indexs},updateUserImage:function(){var t=this;e.chooseImage({count:1,success:function(n){e.uploadFile({url:s.ApiUrl+"index/photo_add",filePath:n.tempFilePaths[0],name:"file",header:{role:"student",Authorization:e.getStorageSync("token")},success:function(e){var n=JSON.parse(e.data);"success"===n.data&&(t.userImage=n.body.photo)}})}})}}};t.default=r}).call(this,n("6e42")["default"])},"4bbe":function(e,t,n){"use strict";n.r(t);var s=n("69c3"),o=n("5366");for(var a in o)"default"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a);n("fc9a");var i=n("2877"),r=Object(i["a"])(o["default"],s["a"],s["b"],!1,null,null,null);t["default"]=r.exports},5366:function(e,t,n){"use strict";n.r(t);var s=n("4830"),o=n.n(s);for(var a in s)"default"!==a&&function(e){n.d(t,e,function(){return s[e]})}(a);t["default"]=o.a},"69c3":function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.show=!1},e.e1=function(t){e.show=!0})},o=[];n.d(t,"a",function(){return s}),n.d(t,"b",function(){return o})},fc9a:function(e,t,n){"use strict";var s=n("456d"),o=n.n(s);o.a}},[["8f75","common/runtime","common/vendor"]]]);